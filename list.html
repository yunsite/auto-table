<template name="atTable">
    <div class="atTable">
        {{settings.options.loadingTemplate}}

        {{>atShowing settings=settings total=total showing=showing}}
        {{#unless Template.subscriptionsReady }}
            <div class="center-loading">
                {{> Template.dynamic template=settings.options.loadingTemplate}}
            </div>
        {{/unless}}
        {{#if settings.options.columnsDisplay}}

            <div class="{{settings.Klass.buttonColumnWrapper}}">
                <button type="button" class="{{settings.Klass.buttonColumn}} " data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    {{settings.msg.columns}} <span class=" {{settings.Klass.hiddenFilter}}">{{#if hiddenFilter}}{{settings.msg.hiddenFilter}}{{/if}}</span><span class="caret"></span>
                </button>
                <ul class="{{settings.Klass.buttonColumnList}}">
                    {{#each field in fields}}
                        <li {{settings.Klass.buttonColumnItem}} ><p><label {{settings.Klass.buttonColumnLabel}} > <input
                                name="columns" type="checkbox" {{atts field}}> {{field.label}}
                        </label></p></li>
                    {{/each}}
                </ul>
            </div>
        {{/if}}
        <div class="clearfix"></div>
        <div class="{{settings.Klass.tableWrapper}}" style="overflow: visible">
            <table class="{{settings.Klass.table}}{{#if settings.options.columnsSort}} table-draggable{{/if}}">
                <thead>
                <tr class="sortable">
                    {{#each field in fields}}
                        <th id="{{field.key}}" style="{{#if field.invisible}}display: none{{/if}}">
                            <a href="#"
                               class="{{settings.Klass.link}}"
                               data-sort="{{field.key}}"
                               data-direction="1">{{field.label}}</a>
                            {{{sort field.key}}}
                        </th>
                    {{/each}}
                </tr>
                {{#if settings.options.filters}}

                    {{>atFilter id=id fields=fields}}

                {{/if}}
                </thead>
                <tbody>
                {{#transition in=settings.Klass.transitionIn out=settings.Klass.transitionOut}}
                    {{#each row in rows}}
                        <tr>
                            {{#each field in fields}}
                                <td class="goto" style="{{#if field.invisible}}display: none{{/if}}">{{valueOf  field.key row}} </td>
                            {{/each}}
                        </tr>
                    {{/each}}
                {{/transition}}
                </tbody>
            </table>
        </div>

        {{#if showingMore}}
            {{> Template.dynamic template=settings.options.loadingTemplate}}
        {{else}}
            {{#if Template.subscriptionsReady }}
                {{#if showMore}}

                    <button class="{{settings.Klass.showMore}} showMore">{{{settings.msg.showMore}}}</button>
                {{/if}}
            {{/if}}
        {{/if}}
        <br>
        {{#unless rows.count}}
            {{#if Template.subscriptionsReady }}
                <div class="{{settings.Klass.noRecordsWrapper}}">
                    <div class="{{settings.Klass.noRecordsWrapper}}">
                        {{#if filtered}}
                            {{{settings.msg.noRecordsCriteria}}}
                        {{else}}
                            {{{settings.msg.noRecords}}}
                        {{/if}}

                    </div>
                </div>
            {{else}}
                {{#unless Template.subscriptionsReady }}
                    <div class="center-loading">
                        {{> Template.dynamic template=settings.options.loadingTemplate}}
                    </div>
                {{/unless}}
            {{/if}}
        {{else}}
            {{>atShowing settings=settings total=total showing=showing}}
        {{/unless}}
    </div>
</template>


<template name="atShowing">
    {{#if settings.options.showing}}
        <div class="{{settings.Klass.showingWrapper}}">
            <div class="{{settings.Klass.showing}}">
                {{settings.msg.showing}} {{showing}} {{settings.msg.from}} {{total}}
            </div>
        </div>
    {{/if}}
</template>