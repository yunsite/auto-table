<template name="atTable">
    <div class="atTable">
        {{>atShowing settings=settings total=total showing=showing}}
        {{#unless Template.subscriptionsReady }}
            <div class="center-loading">
                {{> Template.dynamic template=settings.options.loadingTemplate}}
            </div>
        {{/unless}}
        {{#if settings.options.columnsDisplay}}

            <div class="{{settings.klass.buttonColumnWrapper}}">
                <button type="button" class="{{settings.klass.buttonColumn}} " data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                    {{settings.msg.columns}} <span class=" {{settings.klass.hiddenFilter}}">{{#if
                        hiddenFilter}}{{settings.msg.hiddenFilter}}{{/if}}</span><span class="caret"></span>
                </button>
                <ul class="{{settings.klass.buttonColumnList}}">
                    {{#each column in columns}}
                        <li {{settings.klass.buttonColumnItem}} ><p><label {{settings.klass.buttonColumnLabel}} > <input
                                name="columns" type="checkbox" {{atts column}}> {{column.label}}
                        </label></p></li>
                    {{/each}}
                </ul>
            </div>
        {{/if}}
        <div class="clearfix"></div>
        <div class="{{settings.klass.tableWrapper}}" style="overflow-y: visible">
            <table class="{{settings.klass.table}}{{#if settings.options.columnsSort}} table-draggable{{/if}}">
                <thead>
                <tr class="sortable">
                    {{#each column in columns}}
                        <th id="{{column.key}}" style="{{#if column.invisible}}display: none{{/if}}">
                            <a href="#"

                               data-sort="{{column.key}}"
                               data-direction="1">{{column.label}}</a>
                            {{{sort column.key}}}
                        </th>
                    {{/each}}
                </tr>
                {{#if settings.options.filters}}
                    {{>atFilter id=id columns=columns}}
                {{/if}}
                </thead>
                <tbody>
                {{#transition in=settings.klass.transitionIn out=settings.klass.transitionOut}}
                    {{#each row in rows}}
                        <a class="tr {{settings.klass.link}}" href="{{link row}}" >
                            {{#each column in columns}}
                                <td  style="{{#if column.invisible}}display: none{{/if}}">{{valueOf
                                        column.key row}} </td>
                            {{/each}}
                        </a>
                    {{/each}}
                {{/transition}}
                </tbody>
            </table>
        </div>

        {{#if showingMore}}
            {{> Template.dynamic template=settings.options.loadingTemplate}}
        {{else}}
            {{#if Template.subscriptionsReady }}
                {{#if showMore}}

                    <button class="{{settings.klass.showMore}} showMore">{{{settings.msg.showMore}}}</button>
                {{/if}}
            {{/if}}
        {{/if}}
        <br>
        {{#unless rows.count}}
            {{#if Template.subscriptionsReady }}
                <div class="{{settings.klass.noRecordsWrapper}}">
                    <div class="{{settings.klass.noRecordsWrapper}}">
                        {{#if filtered}}
                            {{{settings.msg.noRecordsCriteria}}}
                        {{else}}
                            {{{settings.msg.noRecords}}}
                        {{/if}}

                    </div>
                </div>
            {{else}}
                {{#unless Template.subscriptionsReady }}
                    <div class="center-loading">
                        {{> Template.dynamic template=settings.options.loadingTemplate}}
                    </div>
                {{/unless}}
            {{/if}}
        {{else}}
            {{>atShowing settings=settings total=total showing=showing}}
        {{/unless}}
    </div>
</template>


<template name="atShowing">
    {{#if settings.options.showing}}
        <div class="{{settings.klass.showingWrapper}}">
            <div class="{{settings.klass.showing}}">
                {{settings.msg.showing}} {{showing}} {{settings.msg.from}} {{total}}
            </div>
        </div>
    {{/if}}
</template>