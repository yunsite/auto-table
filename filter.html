<template name="atFilter">
    {{#autoForm  id=id  schema=schema type="normal" autosaveOnKeyup=true autosave=true}}

        {{#each fields}}
            <td style="{{#if invisible}}display: none{{/if}}">
                <div class="form-group{{#if afFieldIsInvalid name=key }} has-error{{/if}}">
                    <div class=" {{#if multipleOperators}}input-group {{/if}}">
                        {{#if multipleOperators}}
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">{{{selected.shortLabel}}}
                                </button>
                                <ul class="dropdown-menu dropdown-menu-left operator">
                                    {{#each operators}}
                                        <li><a href="#{{value}}">{{{selected.shortLabel}}} {{label}}</a></li>
                                    {{/each}}
                                </ul>
                            </div>
                        {{/if}}
                        <input type="hidden"  value="{{operator}}"  name="{{key}}_operator">

                        {{> afFieldInput name=key value=filter options=afOptionsFromSchema class='btn-xs' }}


                    </div><!-- /input-group -->
                    {{#if afFieldIsInvalid name=key }}
                        <span class="help-block">{{afFieldMessage name=key }}</span>
                    {{/if}}
                </div>
            </td>
        {{/each}}

    {{/autoForm}}

</template>